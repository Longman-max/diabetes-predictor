<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Home | Diabetes Predictor</title>
    <link rel="stylesheet" href="../static/css/style.css" />
    <link
      rel="shortcut icon"
      href="../static/images/logo.jpeg"
      type="image/x-icon"
    />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined&display=swap"
    />
  </head>
  <body>
    <header>
      <div class="header-main">
        <div class="header-left">
          <div class="pk-logo">
            <img src="../static/images/logo.jpeg" alt="Logo" />
          </div>
          <h1 style="margin: 0">Precious Kings</h1>
        </div>
        <div class="header-actions" id="header-actions">
          <button type="button" id="simulate-btn" class="simulate-btn">
            <span style="color: #111">Simulate</span>
            <span
              class="material-symbols-outlined"
              style="font-size: 28px; color: #111; line-height: 1"
              >casino</span
            >
          </button>
          <a href="/about" class="about-btn">About</a>
        </div>
        <div class="mobile-menu" id="mobile-menu" style="display: none">
          <button type="button" id="simulate-btn-mobile" class="simulate-btn">
            <span style="color: #111">Simulate</span>
            <span
              class="material-symbols-outlined"
              style="font-size: 28px; color: #111; line-height: 1"
              >casino</span
            >
          </button>
          <a href="/about" class="about-btn">About</a>
        </div>
        <button class="menu-btn" id="menu-btn" type="button">
          <span class="material-symbols-outlined">menu</span>
        </button>
      </div>
    </header>

    <h1>Diabetes Predictor</h1>

    <div class="two-column">
      <!-- Form -->
      <div class="form-box">
        <form action="/predict" method="post">
          <div class="form-grid">
            <div class="form-group">
              <label for="Age">Age:</label>
              <input type="number" name="Age" required />
            </div>
            <div class="form-group">
              <label for="BMI">BMI:</label>
              <input type="number" step="0.1" name="BMI" required />
            </div>
            <div class="form-group">
              <label for="Blood Glucose">Blood Glucose:</label>
              <input type="number" name="Blood Glucose" required />
            </div>
            <div class="form-group">
              <label for="Blood Pressure">Blood Pressure:</label>
              <input type="number" name="Blood Pressure" required />
            </div>
            <div class="form-group">
              <label for="HbA1c">HbA1c:</label>
              <input type="number" step="0.1" name="HbA1c" required />
            </div>
            <div class="form-group">
              <label for="Insulin Level">Insulin Level:</label>
              <input type="number" name="Insulin Level" required />
            </div>
            <div class="form-group">
              <label for="Skin thickness">Skin thickness:</label>
              <input type="number" name="Skin thickness" required />
            </div>
            <div class="form-group">
              <label for="Pregnancies">Pregnancies:</label>
              <input
                type="number"
                name="Pregnancies"
                id="Pregnancies"
                min="0"
                max="17"
                required
              />
              <span class="error-message" id="error-Pregnancies"></span>
            </div>
            <div class="form-group">
              <label for="Family history">Family History:</label>
              <select name="Family history" id="Family-history" required>
                <option value="">Select</option>
                <option value="0">No</option>
                <option value="1">Yes</option>
              </select>
              <span class="error-message" id="error-Family-history"></span>
            </div>
            <div class="form-group">
              <label for="Physical Activity">Physical Activity:</label>
              <select name="Physical Activity" id="Physical-Activity" required>
                <option value="">Select</option>
                <option value="Low">Low</option>
                <option value="Medium">Medium</option>
                <option value="High">High</option>
              </select>
              <span class="error-message" id="error-Physical-Activity"></span>
            </div>
            <div class="form-group">
              <label for="Smoking status">Smoking Status:</label>
              <select name="Smoking status" id="Smoking-status" required>
                <option value="">Select</option>
                <option value="Smoker">Smoker</option>
                <option value="Non-Smoker">Non-Smoker</option>
              </select>
              <span class="error-message" id="error-Smoking-status"></span>
            </div>
            <div class="form-group">
              <label for="Alcohol Intake">Alcohol Intake (drinks/week):</label>
              <input
                type="number"
                name="Alcohol Intake"
                id="Alcohol-Intake"
                min="0"
                max="30"
                required
              />
              <span class="error-message" id="error-Alcohol-Intake"></span>
            </div>
            <div class="form-group">
              <label for="Diet Qualtiy">Diet Quality (servings/day):</label>
              <input
                type="number"
                name="Diet Qualtiy"
                id="Diet-Qualtiy"
                min="0"
                max="10"
                required
              />
              <span class="error-message" id="error-Diet-Qualtiy"></span>
            </div>
            <div class="form-group">
              <label for="Cholesterol">Cholesterol (mg/dL):</label>
              <input
                type="number"
                name="Cholesterol"
                id="Cholesterol"
                min="100"
                max="400"
                required
              />
              <span class="error-message" id="error-Cholesterol"></span>
            </div>
            <div class="form-group">
              <label for="Triglycerides">Triglycerides (mg/dL):</label>
              <input
                type="number"
                name="Triglycerides"
                id="Triglycerides"
                min="50"
                max="500"
                required
              />
              <span class="error-message" id="error-Triglycerides"></span>
            </div>
            <div class="form-group">
              <label for="Waiste ratio">Waist Circumference (cm):</label>
              <input
                type="number"
                name="Waiste ratio"
                id="Waiste-ratio"
                min="60"
                max="150"
                required
              />
              <span class="error-message" id="error-Waiste-ratio"></span>
            </div>
          </div>

          <button type="submit">Predict</button>
        </form>
      </div>

      <!-- Prediction Result -->
      <div class="prediction-box" id="result">
        <h3>Prediction Result</h3>
        {% with messages = get_flashed_messages() %} {% if messages %}
        <p class="status" id="status-text">Prediction complete</p>
        <div class="progress-bar">
          <span id="progress-bar-span" style="width: 100%"></span>
        </div>
        <p class="result-text final" id="result-text">{{ messages[0] }}</p>
        <button type="button" id="clear-result-btn">Clear Result</button>
        {% else %}
        <p class="status" id="status-text">Awaiting result...</p>
        <div class="progress-bar">
          <span id="progress-bar-span" style="width: 0%"></span>
        </div>
        <p class="result-text" id="result-text">No prediction yet</p>
        <button type="button" id="clear-result-btn">Clear Result</button>
        {% endif %} {% endwith %}
      </div>
    </div>
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        var clearBtn = document.getElementById("clear-result-btn");
        if (clearBtn) {
          clearBtn.addEventListener("click", function () {
            document.getElementById("status-text").textContent =
              "Awaiting result...";
            document.getElementById("progress-bar-span").style.width = "0%";
            document.getElementById("progress-bar-span").style.animation = "";
            document.getElementById("result-text").textContent =
              "No prediction yet";
          });
        }
      });
      // Validation logic
      const form = document.querySelector("form");
      form.addEventListener("submit", function (e) {
        let valid = true;
        // Pregnancies
        const preg = document.getElementById("Pregnancies");
        if (preg.value === "" || preg.value < 0 || preg.value > 17) {
          document.getElementById("error-Pregnancies").textContent =
            "Enter 0–17";
          valid = false;
        } else {
          document.getElementById("error-Pregnancies").textContent = "";
        }
        // Family History
        const fam = document.getElementById("Family-history");
        if (fam.value === "") {
          document.getElementById("error-Family-history").textContent =
            "Select Yes or No";
          valid = false;
        } else {
          document.getElementById("error-Family-history").textContent = "";
        }
        // Physical Activity
        const pa = document.getElementById("Physical-Activity");
        if (pa.value === "") {
          document.getElementById("error-Physical-Activity").textContent =
            "Select activity";
          valid = false;
        } else {
          document.getElementById("error-Physical-Activity").textContent = "";
        }
        // Smoking Status
        const smoke = document.getElementById("Smoking-status");
        if (smoke.value === "") {
          document.getElementById("error-Smoking-status").textContent =
            "Select status";
          valid = false;
        } else {
          document.getElementById("error-Smoking-status").textContent = "";
        }
        // Alcohol Intake
        const alcohol = document.getElementById("Alcohol-Intake");
        if (alcohol.value === "" || alcohol.value < 0 || alcohol.value > 30) {
          document.getElementById("error-Alcohol-Intake").textContent =
            "0–30 drinks/week";
          valid = false;
        } else {
          document.getElementById("error-Alcohol-Intake").textContent = "";
        }
        // Diet Quality
        const diet = document.getElementById("Diet-Qualtiy");
        if (diet.value === "" || diet.value < 0 || diet.value > 10) {
          document.getElementById("error-Diet-Qualtiy").textContent =
            "0–10 servings/day";
          valid = false;
        } else {
          document.getElementById("error-Diet-Qualtiy").textContent = "";
        }
        // Cholesterol
        const chol = document.getElementById("Cholesterol");
        if (chol.value === "" || chol.value < 100 || chol.value > 400) {
          document.getElementById("error-Cholesterol").textContent =
            "100–400 mg/dL";
          valid = false;
        } else {
          document.getElementById("error-Cholesterol").textContent = "";
        }
        // Triglycerides
        const trig = document.getElementById("Triglycerides");
        if (trig.value === "" || trig.value < 50 || trig.value > 500) {
          document.getElementById("error-Triglycerides").textContent =
            "50–500 mg/dL";
          valid = false;
        } else {
          document.getElementById("error-Triglycerides").textContent = "";
        }
        // Waist Circumference
        const waist = document.getElementById("Waiste-ratio");
        if (waist.value === "" || waist.value < 60 || waist.value > 150) {
          document.getElementById("error-Waiste-ratio").textContent =
            "60–150 cm";
          valid = false;
        } else {
          document.getElementById("error-Waiste-ratio").textContent = "";
        }
        if (!valid) e.preventDefault();
      });
      // Simulate random input button logic
      document
        .getElementById("simulate-btn")
        .addEventListener("click", function () {
          // Fill the form with random values
          document.querySelector('input[name="Age"]').value =
            Math.floor(Math.random() * 60) + 18;
          document.querySelector('input[name="BMI"]').value = (
            Math.random() * 15 +
            18
          ).toFixed(1);
          document.querySelector('input[name="Blood Glucose"]').value =
            Math.floor(Math.random() * 100) + 70;
          document.querySelector('input[name="Blood Pressure"]').value =
            Math.floor(Math.random() * 80) + 90;
          document.querySelector('input[name="HbA1c"]').value = (
            Math.random() * 6 +
            4
          ).toFixed(1);
          document.querySelector('input[name="Insulin Level"]').value =
            Math.floor(Math.random() * 100) + 20;
          document.querySelector('input[name="Skin thickness"]').value =
            Math.floor(Math.random() * 30) + 10;
          document.querySelector('input[name="Pregnancies"]').value =
            Math.floor(Math.random() * 10);
          document.getElementById("Family-history").value =
            Math.random() > 0.5 ? "1" : "0";
          document.getElementById("Physical-Activity").value = [
            "Low",
            "Medium",
            "High",
          ][Math.floor(Math.random() * 3)];
          document.getElementById("Smoking-status").value =
            Math.random() > 0.5 ? "Smoker" : "Non-Smoker";
          document.getElementById("Alcohol-Intake").value = Math.floor(
            Math.random() * 31
          );
          document.getElementById("Diet-Qualtiy").value = Math.floor(
            Math.random() * 11
          );
          document.getElementById("Cholesterol").value =
            Math.floor(Math.random() * 301) + 100;
          document.getElementById("Triglycerides").value =
            Math.floor(Math.random() * 451) + 50;
          document.getElementById("Waiste-ratio").value =
            Math.floor(Math.random() * 91) + 60;
          // Scroll to and focus the Predict button
          var predictBtn = document.querySelector('form button[type="submit"]');
          if (predictBtn) {
            predictBtn.scrollIntoView({ behavior: "smooth", block: "center" });
            predictBtn.focus();
          }
        });
      // Mobile menu toggle
      document.addEventListener("DOMContentLoaded", function () {
        var menuBtn = document.getElementById("menu-btn");
        var mobileMenu = document.getElementById("mobile-menu");
        var headerActions = document.getElementById("header-actions");
        menuBtn.addEventListener("click", function () {
          if (
            mobileMenu.style.display === "none" ||
            mobileMenu.style.display === ""
          ) {
            mobileMenu.style.display = "flex";
          } else {
            mobileMenu.style.display = "none";
          }
        });
        // Hide mobile menu on resize
        window.addEventListener("resize", function () {
          if (window.innerWidth > 600) {
            mobileMenu.style.display = "none";
          }
        });
        // Simulate button logic for mobile
        document
          .getElementById("simulate-btn-mobile")
          .addEventListener("click", function () {
            document.getElementById("simulate-btn").click();
            mobileMenu.style.display = "none";
            // Scroll to and focus the Predict button
            var predictBtn = document.querySelector('form button[type="submit"]');
            if (predictBtn) {
              predictBtn.scrollIntoView({ behavior: "smooth", block: "center" });
              predictBtn.focus();
            }
          });
      });
    </script>
  </body>
</html>
