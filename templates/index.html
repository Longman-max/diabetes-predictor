<!DOCTYPE html>
<html lang="en" data-theme="light">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Home | Diabetes Predictor</title>
    <link rel="stylesheet" href="../static/css/style.css" />
    <link rel="stylesheet" href="../static/css/dark-mode.css" />
    <link
      rel="shortcut icon"
      href="../static/images/logo.jpeg"
      type="image/x-icon"
    />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined&display=swap"
    />
    <style>
      /* Responsive menu bar for mobile */
      @media (max-width: 600px) {
        .header-actions {
          display: none !important;
        }
        .mobile-menu {
          display: none; /* Only shown by JS */
          flex-direction: column;
          align-items: flex-start;
          gap: 0;
          overflow: hidden;
          height: 0;
          transition: height 0.35s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .menu-btn {
          display: block !important;
        }
        /* Make dropdown flow in menu for height animation */
        .simulate-dropdown-wrapper-mobile #simulate-dropdown-mobile {
          position: static !important;
          width: 100% !important;
          margin: 0;
          display: none;
          background: #fff;
          border: 1px solid #ccc;
          border-radius: 8px;
          box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
          z-index: 1;
          min-width: 160px;
        }
        .simulate-dropdown-wrapper-mobile.open #simulate-dropdown-mobile {
          display: block;
        }
      }
      @media (min-width: 601px) {
        .header-actions {
          display: flex !important;
        }
        .mobile-menu {
          display: none !important;
        }
        .menu-btn {
          display: none !important;
        }
      }
    </style>
    <!-- <script>
      alert("App is still under development. Some features may not work as expected.");
    </script> -->
  </head>
  <body>
    <header>
      <div class="header-main">
        <div class="header-left">
          <div class="pk-logo">
            <img src="../static/images/logo.jpeg" alt="Logo" />
          </div>
          <h1 style="margin: 0">Precious Kings</h1>
        </div>
        <div class="header-actions" id="header-actions">
          <div class="simulate-dropdown-wrapper" style="position: relative;">
            <button
              type="button"
              id="simulate-btn"
              class="simulate-btn"
              aria-haspopup="true"
              aria-expanded="false"
              style="display: flex; align-items: center; gap: 6px; cursor: pointer;"
            >
              <span style="color: #111">Simulate</span>
              <span class="material-symbols-outlined" style="font-size: 24px; color: #111;">casino</span>
            </button>
            <div id="simulate-dropdown" role="menu" aria-label="Simulation presets" style="display: none; position: absolute; right: 0; top: calc(100% + 8px); background: #fff; border: 1px solid #ccc; border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.08); min-width: 180px;">
              <button class="simulate-option" data-risk="low" style="display:block; width:100%; padding:10px 14px; border:none; background:none; text-align:left;">Low Risk</button>
              <button class="simulate-option" data-risk="medium" style="display:block; width:100%; padding:10px 14px; border:none; background:none; text-align:left;">Medium Risk</button>
              <button class="simulate-option" data-risk="high" style="display:block; width:100%; padding:10px 14px; border:none; background:none; text-align:left;">High Risk</button>
            </div>
          </div>
          <div>
            <a href="/about" class="about-btn">About</a>
          </div>
          <button
            type="button"
            id="theme-toggle"
            class="theme-btn"
            aria-label="Toggle dark mode"
            style="display: flex; align-items: center; gap: 6px; cursor: pointer; background: none; border: none; padding: 8px; border-radius: 8px;"
          >
            <span class="material-symbols-outlined" style="font-size: 24px; color: #111;">dark_mode</span>
          </button>
        </div>
        <div
          class="mobile-menu"
          id="mobile-menu"
          style="
            display: none;
            flex-direction: column;
            align-items: flex-start;
            gap: 0;
            height: 0;
            overflow: hidden;
          "
        >
          <div class="simulate-dropdown-wrapper-mobile" style="width:100%; position: relative;">
            <button
              type="button"
              id="simulate-btn-mobile"
              class="simulate-btn"
              aria-haspopup="true"
              aria-expanded="false"
              style="
                width: 100%;
                display: flex;
                align-items: center;
                gap: 6px;
                cursor: pointer;
              "
            >
              <span style="color: #111">Simulate</span>
              <span
                class="material-symbols-outlined"
                style="font-size: 28px; color: #111; line-height: 1"
                >casino</span
              >
            </button>
            <div id="simulate-dropdown-mobile" role="menu" aria-label="Simulation presets" style="display:none; position: absolute; right: 0; top: calc(100% + 6px); background: #fff; border:1px solid #ccc; border-radius:8px; box-shadow:0 4px 12px rgba(0,0,0,0.08); min-width:160px;">
              <button class="simulate-option-mobile" data-risk="low" style="display:block; width:100%; padding:10px 14px; border:none; background:none; text-align:left;">Low Risk</button>
              <button class="simulate-option-mobile" data-risk="medium" style="display:block; width:100%; padding:10px 14px; border:none; background:none; text-align:left;">Medium Risk</button>
              <button class="simulate-option-mobile" data-risk="high" style="display:block; width:100%; padding:10px 14px; border:none; background:none; text-align:left;">High Risk</button>
            </div>
          </div>
          <a
            href="/about"
            class="about-btn"
            style="width: 100%; margin-top: 4px"
            >About</a
          >
        </div>
        <button class="menu-btn" id="menu-btn" type="button">
          <span class="material-symbols-outlined">menu</span>
        </button>
      </div>
    </header>

    <h1>Diabetes Predictor</h1>

    <div class="two-column">
      <!-- Form -->
      <div class="form-box">
      <form action="/predict" method="post">
          <h3>Medical Information</h3>
          <div class="form-grid">
            <div class="form-group">
              <label for="Age">Age: <span class="clinical-range">(10-100)</span> </label>
              <input type="number" name="Age" required />
            </div>
            <div class="form-group">
              <label for="BMI">BMI: <span class="clinical-range">(10-60)</span> </label>
              <input type="number" step="0.1" name="BMI" required />
            </div>
            <div class="form-group">
              <label for="Blood Glucose">Blood Glucose: <span class="clinical-range">(50-800)</span></label>
              <input type="number" name="Blood Glucose" required />
            </div>
            <div class="form-group">
              <label for="Blood Pressure">Blood Pressure: <span class="clinical-range">(80-200) </label>
              <input type="number" name="Blood Pressure" required />
            </div>
            <div class="form-group">
              <label for="HbA1c">HbA1c: <span class="clinical-range">(4.0-14.0) </label>
              <input type="number" step="0.1" name="HbA1c" required />
            </div>
            <div class="form-group">
              <label for="Insulin Level">Insulin Level: <span class="clinical-range">(2-300) </label>
              <input type="number" name="Insulin Level" required />
            </div>
            <div class="form-group">
              <label for="Skin thickness">Skin thickness: <span class="clinical-range">(7-100) </label>
              <input type="number" name="Skin thickness" required />
            </div>

            <!-- The rest of the fields are now optional -->
            <div class="form-group">
              <label for="Pregnancies"
                >Pregnancies: <span class="clinical-range">(0–17)</span></label
              >
              <input
                type="number"
                name="Pregnancies"
                id="Pregnancies"
                min="0"
                max="17"
              />
              <span class="error-message" id="error-Pregnancies"></span>
            </div>
            <div class="form-group">
              <label for="Family history"
                >Family History:
                <span class="clinical-range">(Yes/No)</span></label
              >
              <select name="Family history" id="Family-history">
                <option value="">Select</option>
                <option value="0">No</option>
                <option value="1">Yes</option>
              </select>
              <span class="error-message" id="error-Family-history"></span>
            </div>
            <div class="form-group">
              <label for="Physical Activity"
                >Physical Activity:
                <span class="clinical-range">(Low/Medium/High)</span></label
              >
              <select name="Physical Activity" id="Physical-Activity">
                <option value="">Select</option>
                <option value="Low">Low</option>
                <option value="Medium">Medium</option>
                <option value="High">High</option>
              </select>
              <span class="error-message" id="error-Physical-Activity"></span>
            </div>
            <div class="form-group">
              <label for="Smoking status"
                >Smoking Status:
                <span class="clinical-range">(Smoker/Non-Smoker)</span></label
              >
              <select name="Smoking status" id="Smoking-status">
                <option value="">Select</option>
                <option value="Smoker">Smoker</option>
                <option value="Non-Smoker">Non-Smoker</option>
              </select>
              <span class="error-message" id="error-Smoking-status"></span>
            </div>
            <div class="form-group">
              <label for="Alcohol Intake"
                >Alcohol Intake (drinks/week):
                <span class="clinical-range">(0–30)</span></label
              >
              <input
                type="number"
                name="Alcohol Intake"
                id="Alcohol-Intake"
                min="0"
                max="30"
              />
              <span class="error-message" id="error-Alcohol-Intake"></span>
            </div>
            <div class="form-group">
              <label for="Diet Qualtiy"
                >Diet Quality (servings/day):
                <span class="clinical-range">(0–10)</span></label
              >
              <input
                type="number"
                name="Diet Qualtiy"
                id="Diet-Qualtiy"
                min="0"
                max="10"
              />
              <span class="error-message" id="error-Diet-Qualtiy"></span>
            </div>
            <div class="form-group">
              <label for="Cholesterol"
                >Cholesterol (mg/dL):
                <span class="clinical-range">(100–400)</span></label
              >
              <input
                type="number"
                name="Cholesterol"
                id="Cholesterol"
                min="100"
                max="400"
              />
              <span class="error-message" id="error-Cholesterol"></span>
            </div>
            <div class="form-group">
              <label for="Triglycerides"
                >Triglycerides (mg/dL):
                <span class="clinical-range">(50–500)</span></label
              >
              <input
                type="number"
                name="Triglycerides"
                id="Triglycerides"
                min="50"
                max="500"
              />
              <span class="error-message" id="error-Triglycerides"></span>
            </div>
            <div class="form-group">
              <label for="Waiste ratio"
                >Waist Circumference (cm):
                <span class="clinical-range">(60–150)</span></label
              >
              <input
                type="number"
                name="Waiste ratio"
                id="Waiste-ratio"
                min="60"
                max="150"
              />
              <span class="error-message" id="error-Waiste-ratio"></span>
            </div>
          </div>

          <button type="submit">Predict</button>
        </form>
      </div>

      <!-- Prediction Result -->
      <div class="prediction-box" id="result">
        <h3>Prediction Result</h3>
        {% with messages = get_flashed_messages() %} {% if messages %}
        <p class="status" id="status-text">Prediction complete</p>
        <div class="progress-bar">
          <span id="progress-bar-span" style="width: 100%"></span>
        </div>
        <div class="health-icon">
          <svg xmlns="http://www.w3.org/2000/svg" width="60" height="60" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-briefcase-medical-icon lucide-briefcase-medical">
            <path d="M12 11v4"/>
            <path d="M14 13h-4"/>
            <path d="M16 6V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v2"/>
            <path d="M18 6v14"/>
            <path d="M6 6v14"/>
            <rect width="20" height="14" x="2" y="6" rx="2"/>
          </svg>
        </div>
        <p class="result-text final" id="result-text">{{ messages[0] }}</p>
        {% if result_message %}
          {% set risk, advice = result_message %}
          <div class="result-text" style="margin-bottom: 0.5em; font-weight: bold;">
            {{ risk }}<br>
            <span class="advice" style="color: #d35400; font-size: 1.1em;">{{ advice }}</span>
          </div>
        {% endif %}
        <p class="instruction-text">
          Enter your medical information and click "Predict" to see your diabetes risk assessment.
        </p>
        <button type="button" id="clear-result-btn">Clear Result</button>
        {% else %}
        <p class="status" id="status-text">Awaiting result...</p>
        <div class="progress-bar">
          <span id="progress-bar-span" style="width: 0%"></span>
        </div>
        <div class="health-icon">
          <svg xmlns="http://www.w3.org/2000/svg" width="60" height="60" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-briefcase-medical-icon lucide-briefcase-medical">
            <path d="M12 11v4"/>
            <path d="M14 13h-4"/>
            <path d="M16 6V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v2"/>
            <path d="M18 6v14"/>
            <path d="M6 6v14"/>
            <rect width="20" height="14" x="2" y="6" rx="2"/>
          </svg>
        </div>
        <p class="result-text" id="result-text">No prediction yet</p>
        <p class="instruction-text">
          Enter your medical information and click "Predict" to see your
          diabetes risk assessment.
        </p>
        <button type="button" id="clear-result-btn">Clear Result</button>
        {% endif %} {% endwith %}
      </div>
    </div>
  <script src="../static/js/script.js" ></script>
    <script src="../static/js/theme.js"></script>
  </body>
</html>